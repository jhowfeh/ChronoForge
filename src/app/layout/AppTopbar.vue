<script setup>
import { useLayout } from '@/app/layout/composables/layout';
import { ref } from "vue";
import AppConfigurator from './AppConfigurator.vue';

import { useRouter } from 'vue-router';
const router = useRouter();

const { toggleMenu, toggleDarkMode, isDarkTheme } = useLayout();

const popoverShow = ref();
const togglePopover = (event) => {
    popoverShow.value.toggle(event);
}
</script>

<template>
    <div class="layout-topbar">
        <div class="layout-topbar-logo-container">
            <button class="layout-menu-button layout-topbar-action" @click="toggleMenu">
                <i class="pi pi-bars"></i>
            </button>
            <router-link to="/" class="layout-topbar-logo">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 299 409"
                    fill="none"
                >
                    <path 
                        d="M 205 29 L 210 73 L 154 122 L 147 112 L 135 125 L 102 97 L 95 82 L 102 54 L 89 84 L 110 121 L 107 136 
                            L 70 170 L 85 132 L 60 108 L 74 133 L 42 183 L 41 152 L 27 176 L 28 203 L 49 230 L 40 232 L 58 237 
                            L 53 244 L 33 233 L 36 245 L 50 249 L 42 253 L 51 280 L 39 278 L 56 291 L 47 300 L 73 312 L 66 322 
                            L 80 350 L 83 338 L 93 343 L 99 334 L 106 359 L 113 341 L 118 352 L 132 344 L 126 356 L 153 340 
                            L 148 348 L 159 355 L 164 336 L 172 361 L 181 323 L 179 333 L 184 328 L 197 348 L 214 328 L 209 322 
                            L 226 330 L 229 311 L 256 285 L 247 260 L 260 253 L 251 247 L 276 213 L 278 189 L 258 154 L 257 193 
                            L 249 168 L 218 136 L 216 118 L 234 101 L 203 123 L 212 158 L 191 141 L 190 116 L 221 70 Z
                            
                            M 152 157 L 211 262 L 210 263 L 93 263 L 92 261 L 149 160 Z

                            M 157 156 L 223 172 L 227 174 L 234 175 L 237 177 L 237 180 L 235 184 L 227 215 L 224 222 L 220 239 
                            L 213 259 L 211 258 L 208 251 L 176 195 L 171 184 L 164 173 L 160 164 L 158 162 L 156 158 Z

                            M 146 156 L 147 158 L 90 259 L 82 236 L 82 233 L 80 229 L 80 226 L 78 222 L 78 219 L 76 215 L 75 208 
                            L 73 204 L 66 177 L 69 175 L 76 174 L 80 172 Z

                            M 94 267 L 95 266 L 208 266 L 209 267 L 151 327 L 146 323 Z

                            M 238 188 L 239 189 L 239 235 L 240 236 L 240 276 L 239 277 L 231 273 L 224 268 L 219 266 L 216 263 
                            L 217 261 L 217 258 L 219 254 L 219 251 L 221 247 L 221 244 L 223 240 L 223 237 L 224 236 L 224 234 
                            L 226 230 L 226 227 L 228 223 L 228 220 L 230 216 L 230 213 L 232 209 L 232 206 L 234 202 L 234 199 
                            L 236 195 L 236 192 Z

                            M 65 188 L 66 189 L 67 195 L 69 199 L 69 202 L 70 203 L 70 205 L 72 209 L 72 212 L 74 216 L 75 223 
                            L 77 227 L 77 230 L 79 234 L 79 237 L 81 241 L 81 244 L 83 248 L 83 251 L 84 252 L 85 258 L 86 259 
                            L 86 262 L 87 263 L 82 267 L 77 269 L 75 271 L 72 272 L 70 274 L 64 277 L 63 276 L 63 240 L 64 239 
                            L 64 189 Z

                            M 66 280 L 76 275 L 78 273 L 88 268 L 90 268 L 117 296 L 117 297 L 136 316 L 136 317 L 140 321 L 138 322 
                            L 136 320 L 129 317 L 127 315 L 120 312 L 118 310 L 113 308 L 111 306 L 104 303 L 102 301 L 97 299 L 95 297 
                            L 90 295 L 88 293 L 83 291 L 81 289 L 69 283 Z

                            M 237 280 L 236 282 L 229 285 L 227 287 L 218 291 L 216 293 L 206 298 L 204 297 L 206 293 L 204 288 L 201 285 
                            L 197 288 L 196 292 L 197 294 L 200 296 L 200 298 L 202 298 L 203 297 L 205 298 L 203 300 L 192 305 L 190 307 
                            L 179 312 L 177 314 L 167 319 L 165 318 L 165 317 L 185 297 L 185 296 L 187 295 L 187 294 L 213 267 L 233 277 Z

                            M 150 131 L 150 150 L 148 152 L 142 153 L 141 154 L 138 154 L 137 155 L 134 155 L 130 157 L 126 157 L 122 159 
                            L 119 159 L 118 160 L 115 160 L 114 161 L 111 161 L 110 162 L 107 162 L 103 164 L 92 166 L 91 167 L 85 168 
                            L 84 169 L 81 169 L 80 170 L 78 170 L 77 169 L 120 145 L 122 146 L 120 148 L 121 149 L 121 154 L 120 155 
                            L 123 154 L 122 153 L 122 151 L 123 150 L 122 149 L 122 146 L 121 145 L 123 143 L 130 140 L 132 138 L 141 134 
                            L 143 132 L 147 130 L 149 130 Z
                            
                            M 154 130 L 155 129 L 157 131 L 164 134 L 166 136 L 175 140 L 177 142 L 197 152 L 199 154 L 206 157 L 208 159 L 217 163 L 219 165 L 227 169 L 226 170 L 224 170 L 223 169 L 216 168 L 212 166 L 209 166 L 208 165 L 205 165 L 204 164 L 201 164 L 200 163 L 193 162 L 189 160 L 186 160 L 185 159 L 182 159 L 181 158 L 178 158 L 177 157 L 174 157 L 173 156 L 166 155 L 162 153 L 155 152 L 154 151 Z
                            M 161 209 L 160 210 L 158 210 L 157 211 L 156 211 L 156 212 L 155 213 L 155 214 L 154 215 L 154 236 L 155 237 L 155 238 L 157 240 L 158 240 L 159 241 L 160 241 L 161 242 L 162 242 L 163 241 L 164 241 L 165 240 L 166 240 L 168 238 L 168 237 L 169 236 L 169 215 L 168 214 L 168 213 L 167 212 L 167 211 L 166 211 L 165 210 L 163 210 L 162 209 Z
                            M 140 209 L 139 210 L 137 210 L 134 212 L 134 213 L 133 214 L 133 220 L 136 222 L 139 220 L 139 218 L 137 216 L 135 216 L 134 215 L 135 214 L 135 213 L 138 211 L 142 211 L 145 214 L 145 216 L 144 217 L 145 218 L 145 220 L 144 221 L 144 222 L 135 231 L 135 232 L 133 235 L 133 241 L 134 241 L 134 240 L 136 238 L 139 238 L 143 241 L 145 241 L 146 242 L 150 239 L 150 238 L 149 237 L 146 238 L 142 235 L 138 235 L 136 237 L 135 236 L 135 235 L 140 230 L 141 230 L 143 228 L 144 228 L 147 225 L 147 224 L 149 221 L 149 218 L 150 217 L 149 216 L 148 213 L 145 210 L 142 210 L 141 209 Z
                            M 149 283 L 148 284 L 147 284 L 147 285 L 146 286 L 146 287 L 145 288 L 146 289 L 146 291 L 147 292 L 147 294 L 146 295 L 146 297 L 145 298 L 145 300 L 146 301 L 146 302 L 147 303 L 147 304 L 148 304 L 149 305 L 152 305 L 153 304 L 154 304 L 155 303 L 155 302 L 156 301 L 156 297 L 155 296 L 155 295 L 154 294 L 154 293 L 155 292 L 155 290 L 156 289 L 156 288 L 155 287 L 155 285 L 153 283 Z
                            M 160 211 L 163 211 L 165 213 L 165 224 L 164 225 L 165 226 L 165 237 L 162 240 L 161 240 L 158 237 L 158 226 L 159 225 L 158 224 L 158 213 Z
                            M 108 78 L 108 86 L 109 87 L 109 88 L 110 89 L 110 90 L 116 96 L 117 96 L 118 97 L 120 97 L 120 92 L 119 91 L 119 90 L 118 89 L 118 88 L 117 87 L 117 86 L 111 80 L 110 80 Z
                            M 85 191 L 85 196 L 88 199 L 91 199 L 92 198 L 92 196 L 91 195 L 90 195 L 88 197 L 87 197 L 86 196 L 86 192 L 88 190 L 90 190 L 91 191 L 93 191 L 95 193 L 95 194 L 96 195 L 96 196 L 97 197 L 97 198 L 98 199 L 98 200 L 102 204 L 104 204 L 104 203 L 103 202 L 103 201 L 106 198 L 107 198 L 108 197 L 108 194 L 107 193 L 106 193 L 106 195 L 105 196 L 104 196 L 102 198 L 102 201 L 101 202 L 100 201 L 100 199 L 99 198 L 99 196 L 98 195 L 98 193 L 97 192 L 97 191 L 95 189 L 94 189 L 93 188 L 88 188 Z
                            M 212 190 L 212 191 L 210 193 L 209 193 L 208 194 L 206 194 L 205 195 L 200 195 L 200 197 L 201 198 L 201 199 L 202 200 L 202 201 L 200 203 L 198 203 L 199 204 L 199 205 L 200 206 L 203 203 L 204 204 L 205 204 L 205 202 L 206 201 L 208 201 L 208 200 L 209 199 L 210 199 L 211 198 L 212 198 L 213 197 L 212 196 L 211 196 L 210 195 L 211 194 L 212 194 L 213 193 L 213 191 Z
                            M 88 285 L 88 287 L 91 290 L 94 290 L 95 289 L 96 289 L 98 287 L 99 287 L 99 285 L 98 284 L 98 283 L 97 283 L 96 282 L 92 282 L 91 283 L 90 283 Z
                            M 202 328 L 202 332 L 199 335 L 196 335 L 195 334 L 194 335 L 193 335 L 192 336 L 191 335 L 191 334 L 190 333 L 189 333 L 188 332 L 189 331 L 192 331 L 193 330 L 195 332 L 199 332 L 198 332 L 197 331 L 197 330 L 196 329 L 198 327 L 201 327 Z
                            M 246 277 L 248 279 L 248 280 L 250 282 L 247 285 L 245 285 L 244 286 L 245 287 L 245 291 L 244 292 L 243 292 L 242 291 L 242 290 L 243 289 L 242 288 L 241 288 L 240 287 L 240 285 L 241 284 L 242 285 L 243 284 L 242 283 L 244 281 L 245 281 L 245 278 Z
                            M 228 245 L 226 247 L 226 251 L 227 252 L 229 252 L 230 251 L 231 252 L 231 254 L 232 254 L 235 251 L 235 248 L 233 246 L 232 246 L 231 245 Z
                            M 132 144 L 129 144 L 128 145 L 127 145 L 126 146 L 126 148 L 127 149 L 126 150 L 126 153 L 129 153 L 130 152 L 131 152 L 133 150 L 133 149 L 132 148 Z
                            M 75 239 L 75 240 L 76 241 L 76 244 L 75 245 L 71 241 L 70 241 L 69 240 L 68 240 L 67 241 L 67 245 L 71 249 L 72 248 L 72 246 L 73 245 L 74 245 L 76 247 L 77 247 L 78 248 L 78 247 L 77 246 L 77 242 L 76 241 L 76 240 Z
                            M 72 346 L 71 346 L 70 347 L 70 348 L 68 350 L 68 352 L 67 353 L 67 358 L 68 358 L 72 354 L 72 353 L 73 352 L 73 348 L 72 347 Z
                            M 150 294 L 152 294 L 153 295 L 153 302 L 151 304 L 150 304 L 148 302 L 148 296 Z
                            M 57 212 L 58 212 L 59 213 L 59 214 L 60 215 L 60 216 L 61 217 L 61 222 L 60 223 L 59 223 L 57 221 L 57 220 L 56 219 L 56 213 Z
                            M 250 247 L 252 249 L 252 251 L 251 252 L 252 252 L 253 253 L 249 257 L 247 257 L 246 256 L 246 255 L 245 254 L 247 252 L 248 253 L 249 253 L 249 251 L 248 250 L 248 248 L 249 247 Z
                            M 171 325 L 172 326 L 175 326 L 176 327 L 174 329 L 174 331 L 172 333 L 171 332 L 169 332 L 167 330 L 167 329 L 168 328 L 169 328 L 169 327 Z
                            M 150 284 L 151 284 L 153 286 L 153 289 L 154 290 L 153 291 L 153 292 L 152 293 L 150 293 L 148 291 L 148 286 Z
                            M 209 185 L 206 185 L 205 184 L 204 184 L 205 185 L 205 186 L 204 187 L 203 187 L 202 188 L 200 188 L 197 191 L 196 191 L 194 193 L 192 193 L 192 195 L 193 195 L 194 196 L 194 195 L 195 194 L 196 194 L 198 192 L 199 192 L 200 191 L 201 191 L 203 189 L 204 189 L 206 187 L 207 187 L 208 186 L 209 186 Z
                            M 98 284 L 98 285 L 96 287 L 95 287 L 93 289 L 90 289 L 89 288 L 89 286 L 90 285 L 91 285 L 92 284 L 93 284 L 94 283 L 95 283 L 96 282 Z
                            M 173 143 L 173 145 L 170 148 L 170 149 L 173 149 L 174 150 L 174 151 L 173 152 L 174 152 L 175 153 L 176 153 L 176 152 L 177 151 L 177 146 L 176 146 L 175 147 L 174 146 L 174 145 L 175 144 L 174 143 Z
                            M 282 221 L 278 221 L 276 223 L 275 223 L 274 224 L 274 225 L 272 227 L 272 228 L 271 229 L 273 229 L 274 228 L 275 228 Z
                            M 122 367 L 122 368 L 121 369 L 121 371 L 120 372 L 120 373 L 121 374 L 122 374 L 123 375 L 125 375 L 125 369 L 123 367 Z
                            M 33 252 L 34 252 L 35 253 L 35 256 L 37 258 L 36 259 L 36 263 L 37 264 L 37 265 L 38 266 L 38 267 L 39 267 L 39 266 L 40 265 L 40 264 L 41 263 L 41 262 L 40 261 L 38 261 L 36 259 L 37 258 L 36 257 L 36 256 L 37 255 L 38 256 L 37 255 L 38 254 L 37 253 L 35 253 L 34 252 Z
                            M 194 337 L 197 340 L 197 342 L 199 344 L 198 345 L 197 345 L 196 346 L 195 346 L 193 344 L 194 343 L 195 343 L 194 342 L 194 341 L 193 340 L 193 338 Z
                            M 200 286 L 202 288 L 202 289 L 203 290 L 202 291 L 202 292 L 200 294 L 199 293 L 199 292 L 197 290 L 197 289 Z
                            M 211 196 L 210 197 L 209 197 L 208 198 L 206 198 L 206 199 L 205 200 L 204 200 L 201 197 L 202 196 L 207 196 L 208 195 L 210 195 Z
                            M 207 319 L 208 320 L 208 323 L 207 324 L 206 323 L 206 322 L 205 322 L 205 323 L 206 323 L 207 324 L 205 326 L 204 326 L 203 325 L 203 321 L 204 320 L 206 320 Z
                            M 138 359 L 136 359 L 136 360 L 133 363 L 132 363 L 133 363 L 136 366 L 138 364 L 138 363 L 139 362 L 139 361 L 138 360 Z
                            M 188 348 L 185 351 L 184 351 L 183 352 L 184 351 L 186 353 L 186 355 L 187 355 L 189 353 L 190 353 L 190 350 Z
                            M 6 271 L 10 271 L 11 270 L 12 270 L 14 268 L 14 267 L 9 267 L 7 269 L 6 269 Z
                            M 203 376 L 203 378 L 207 382 L 208 382 L 209 381 L 209 380 L 208 379 L 208 378 L 207 377 L 206 377 L 205 376 Z
                            M 206 279 L 203 282 L 204 282 L 206 284 L 206 285 L 208 287 L 208 288 L 209 289 L 210 289 L 210 287 L 211 286 L 211 285 L 210 286 L 207 283 L 207 282 L 205 280 Z
                            M 243 264 L 244 263 L 245 264 L 245 265 L 246 266 L 247 265 L 248 266 L 248 268 L 247 269 L 244 269 L 243 268 L 244 267 L 243 266 Z
                            M 67 244 L 69 242 L 70 242 L 73 245 L 72 246 L 71 246 L 71 247 L 70 248 L 68 246 L 68 245 Z
                            M 226 248 L 228 246 L 230 246 L 232 248 L 231 249 L 231 250 L 230 251 L 229 251 Z
                            M 50 265 L 51 264 L 54 264 L 55 265 L 55 268 L 54 269 L 53 269 L 52 268 L 52 267 L 51 267 L 50 266 Z
                            M 82 352 L 82 354 L 81 355 L 80 355 L 79 356 L 79 357 L 78 358 L 78 359 L 79 360 L 80 360 L 81 359 L 82 360 L 82 361 L 83 360 L 83 359 L 82 358 L 82 356 L 81 355 L 83 353 Z
                            M 73 320 L 74 319 L 77 319 L 79 321 L 78 322 L 78 324 L 77 325 L 75 323 L 76 322 L 75 321 L 74 321 Z
                            M 223 317 L 224 318 L 222 320 L 222 321 L 223 322 L 222 323 L 220 323 L 219 322 L 219 320 L 222 317 Z
                            M 105 291 L 102 288 L 102 289 L 100 291 L 99 291 L 98 292 L 97 292 L 95 294 L 96 294 L 97 295 L 98 295 L 98 294 L 99 293 L 100 293 L 102 291 L 103 291 L 104 290 Z
                            M 163 351 L 164 352 L 163 353 L 163 354 L 161 356 L 162 357 L 163 356 L 164 356 L 165 357 L 164 358 L 164 359 L 167 356 L 166 356 L 165 355 L 165 352 L 164 351 Z"
                        fill="var(--primary-color)"
                    />
                </svg>

                <span>SmartHealth</span>
            </router-link>
        </div>

        <div class="layout-topbar-actions">
            <div class="layout-config-menu">
                <button type="button" class="layout-topbar-action" @click="toggleDarkMode">
                    <i :class="['pi', { 'pi-moon': isDarkTheme, 'pi-sun': !isDarkTheme }]"></i>
                </button>
                <div class="relative">
                    <button
                        v-styleclass="{ selector: '@next', enterFromClass: 'hidden', enterActiveClass: 'p-anchored-overlay-enter-active', leaveToClass: 'hidden', leaveActiveClass: 'p-anchored-overlay-leave-active', hideOnOutsideClick: true }"
                        type="button"
                        class="layout-topbar-action layout-topbar-action-highlight"
                    >
                        <i class="pi pi-palette"></i>
                    </button>
                    <AppConfigurator />
                </div>
            </div>

            <button
                class="layout-topbar-menu-button layout-topbar-action"
                v-styleclass="{ selector: '@next', enterFromClass: 'hidden', enterActiveClass: 'p-anchored-overlay-enter-active', leaveToClass: 'hidden', leaveActiveClass: 'p-anchored-overlay-leave-active', hideOnOutsideClick: true }"
            >
                <i class="pi pi-ellipsis-v"></i>
            </button>

            <div class="layout-topbar-menu hidden lg:block">
                <div class="layout-topbar-menu-content">
                    <!-- <button type="button" class="layout-topbar-action">
                        <i class="pi pi-calendar"></i>
                        <span>Calendar</span>
                    </button>
                    <button type="button" class="layout-topbar-action">
                        <i class="pi pi-inbox"></i>
                        <span>Messages</span>
                    </button> -->
                </div>
            </div>
        </div>
    </div>
</template>
